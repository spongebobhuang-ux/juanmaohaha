<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·æ¯›è®¾è®¡ç©ºé—´ | Curly's Design Space</title>
    <style>
        /* --- 1. åŸºç¡€æ ·å¼ --- */
        :root {
            --bg-color: #ffffff;
            --text-main: #202124;
            --text-sub: #5f6368;
            --radius-large: 24px;
            --font-family: 'Google Sans', -apple-system, BlinkMacSystemFont, Roboto, sans-serif;
            --danger: #ff4d4f;
            --success: #52c41a;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: var(--font-family);
            background: var(--bg-color);
            color: var(--text-main);
            padding-bottom: 100px;
        }

        /* --- 2. å¯¼èˆªæ  --- */
        header {
            position: sticky; top: 0; z-index: 100;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(12px);
            padding: 16px 32px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            display: flex; flex-direction: column; gap: 16px;
        }

        .header-main { display: flex; justify-content: space-between; align-items: center; width: 100%; }
        .logo { font-size: 1.5rem; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 8px; }
        .logo::before { content: ''; display: block; width: 12px; height: 12px; background: var(--text-main); border-radius: 50%; }

        .top-menu { display: flex; gap: 24px; }
        .menu-link { font-size: 0.95rem; font-weight: 500; color: #3c4043; cursor: pointer; text-decoration: none; position: relative; padding: 4px 0; }
        .menu-link:hover { color: #000; }
        .menu-link::after { content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 2px; background: var(--text-main); transition: width 0.3s; }
        .menu-link:hover::after { width: 100%; }

        .breadcrumb { display: none; align-items: center; gap: 8px; font-size: 0.9rem; color: var(--text-sub); padding-top: 4px; border-top: 1px solid #f1f3f4; width: 100%; }
        .breadcrumb.active { display: flex; }
        .back-btn { cursor: pointer; padding: 4px 12px; background: #f1f3f4; border-radius: 20px; font-weight: 500; }

        @media (max-width: 600px) {
            header { padding: 16px 20px; }
            .header-main { flex-direction: column; align-items: flex-start; gap: 16px; }
            .top-menu { width: 100%; overflow-x: auto; padding-bottom: 4px; gap: 20px; }
            .menu-link { white-space: nowrap; }
            .admin-float-btn { bottom: 20px; right: 20px; }
        }

        /* --- 3. å¸ƒå±€ --- */
        .container { max-width: 1200px; margin: 0 auto; padding: 20px 24px; }
        .grid-layout { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; margin-bottom: 60px; }
        @media (min-width: 768px) { .grid-layout { grid-template-columns: repeat(3, 1fr); } }
        @media (min-width: 1024px) { .grid-layout { grid-template-columns: repeat(4, 1fr); } }

        /* --- 4. å¡ç‰‡ä¸åˆ é™¤æŒ‰é’® --- */
        .card { position: relative; aspect-ratio: 3 / 4; border-radius: var(--radius-large); overflow: hidden; background: #f1f3f4; cursor: pointer; transition: transform 0.3s; }
        .card:hover { transform: translateY(-6px); box-shadow: 0 10px 30px rgba(0,0,0,0.08); }
        .card img { width: 100%; height: 100%; object-fit: cover; }
        .card-overlay { position: absolute; bottom: 0; left: 0; width: 100%; padding: 24px; background: linear-gradient(to top, rgba(0,0,0,0.6), transparent); color: white; }
        .card-title { font-size: 1.2rem; font-weight: 500; margin-bottom: 4px; }
        .card-subtitle { font-size: 0.85rem; opacity: 0.8; }

        /* åˆ é™¤æŒ‰é’® (ç®¡ç†å‘˜æ¨¡å¼) */
        .delete-badge {
            position: absolute; top: 10px; right: 10px; width: 32px; height: 32px;
            background: white; color: var(--danger); border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-weight: bold; font-size: 20px; z-index: 10;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }
        .delete-badge:hover { transform: scale(1.1); background: var(--danger); color: white; }

        /* --- 5. åº•éƒ¨æµ·æŠ¥ --- */
        .poster-section { display: none; justify-content: center; margin-top: 40px; padding-bottom: 40px; animation: fadeIn 0.8s ease forwards; }
        .poster-card { width: 100%; max-width: 400px; aspect-ratio: 3 / 4; border-radius: var(--radius-large); overflow: hidden; position: relative; }
        .poster-content { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; text-align: center; padding: 30px; }
        .poster-tag { background: white; color: black; padding: 6px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; margin-bottom: 16px; }

        /* --- 6. ç®¡ç†å‘˜ç•Œé¢ --- */
        /* æ‚¬æµ®å¼€å…³ */
        .admin-float-btn {
            position: fixed; bottom: 30px; right: 30px;
            background: #202124; color: white; padding: 12px 24px;
            border-radius: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            cursor: pointer; z-index: 900; font-weight: 500;
            transition: all 0.3s;
        }
        .admin-float-btn.active { background: var(--success); }

        /* æ§åˆ¶é¢æ¿ */
        .admin-panel {
            display: none; position: fixed; bottom: 0; left: 0; width: 100%;
            background: white; padding: 20px; border-top: 1px solid #eee;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1); z-index: 950;
            flex-direction: column; gap: 15px;
        }
        .admin-panel.show { display: flex; }
        .admin-row { display: flex; justify-content: space-between; align-items: center; }
        .admin-btn { padding: 10px 20px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; }
        .btn-add { background: var(--text-main); color: white; }
        .btn-save { background: var(--success); color: white; }

        /* æ·»åŠ æ¨¡æ€æ¡† */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; }
        .modal.show { display: flex; }
        .modal-box { background: white; padding: 30px; border-radius: 20px; width: 90%; max-width: 400px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.9rem; }
        .form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; }
        .modal-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px; }

        /* åŠ¨ç”» */
        .fade-in { animation: fadeIn 0.6s forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        /* é¡µé¢æ ‡é¢˜ */
        .page-header { margin-bottom: 40px; padding: 0 10px; display: none; }
        .page-title { font-size: 2.5rem; font-weight: 400; letter-spacing: -1px; margin-bottom: 10px; }

        /* ç¯ç®± */
        .lightbox { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.98); z-index: 999; flex-direction: column; align-items: center; justify-content: center; }
        .lightbox.active { display: flex; }
        .lb-img { max-width: 90%; max-height: 80%; border-radius: 12px; box-shadow: 0 20px 50px rgba(0,0,0,0.15); }
        .lb-close { position: absolute; top: 30px; right: 30px; font-size: 30px; cursor: pointer; }

    </style>
</head>
<body>

    <header>
        <div class="header-main">
            <div class="logo" onclick="renderHome()">Curly's Space</div>
            <nav class="top-menu">
                <a class="menu-link" onclick="renderCategory('product')">äº§å“é¡¹ç›®</a>
                <a class="menu-link" onclick="renderCategory('offline')">çº¿ä¸‹é¡¹ç›®</a>
                <a class="menu-link" onclick="renderCategory('ecommerce')">ç”µå•†å±•ç¤º</a>
                <a class="menu-link" onclick="renderCategory('brand')">å“ç‰Œå†…å®¹</a>
            </nav>
        </div>
        <div class="breadcrumb" id="breadcrumb">
            <span class="back-btn" onclick="renderHome()">â† è¿”å›é¦–é¡µ</span>
            <span id="pageName">åˆ†ç±»åç§°</span>
        </div>
    </header>

    <div class="container">
        <div id="pageHeader" class="page-header">
            <h1 class="page-title" id="displayTitle">Title</h1>
            <p style="color:#666">Selected works collection.</p>
        </div>

        <div id="gridContainer" class="grid-layout"></div>

        <div id="homePoster" class="poster-section">
            <div class="poster-card">
                <img src="images/poster.jpg" style="width:100%;height:100%;object-fit:cover;" alt="Featured">
                <div class="poster-content">
                    <span class="poster-tag">CONTACT ME</span>
                    <h2 style="font-size:1.8rem; margin-bottom:10px;">Let's Create Together</h2>
                </div>
            </div>
        </div>
    </div>

    <!-- ç¯ç®± -->
    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <span class="lb-close">&times;</span>
        <img id="lbImg" class="lb-img" src="">
        <div style="margin-top:15px; text-align:center;">
            <h3 id="lbTitle"></h3><p id="lbDesc" style="color:#666"></p>
        </div>
    </div>

    <!-- ç®¡ç†å‘˜æ‚¬æµ®æŒ‰é’® -->
    <div class="admin-float-btn" id="adminBtn" onclick="handleAdminLogin()">ç®¡ç†å‘˜ç™»å½•</div>

    <!-- ç®¡ç†å‘˜æ§åˆ¶é¢æ¿ -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-row">
            <span><strong>ç®¡ç†æ¨¡å¼</strong>: <span id="currentStatus">è¯·å…ˆè¿›å…¥åˆ†ç±»é¡µé¢æ·»åŠ ä½œå“</span></span>
            <div style="display:flex; gap:10px;">
                <button class="admin-btn btn-add" onclick="openAddModal()">+ æ–°å¢ä½œå“</button>
                <button class="admin-btn btn-save" onclick="exportData()">ğŸ’¾ ä¿å­˜æ›´æ”¹(ç”Ÿæˆä»£ç )</button>
            </div>
        </div>
    </div>

    <!-- æ–°å¢ä½œå“å¼¹çª— -->
    <div class="modal" id="addModal">
        <div class="modal-box">
            <h3 style="margin-bottom:20px;">æ–°å¢ä½œå“</h3>
            <div class="form-group">
                <label>ä½œå“æ ‡é¢˜</label>
                <input type="text" id="newTitle">
            </div>
            <div class="form-group">
                <label>å›¾ç‰‡æ–‡ä»¶å (éœ€å…ˆä¸Šä¼ åˆ°GitHub imagesæ–‡ä»¶å¤¹)</label>
                <input type="text" id="newImgName" placeholder="ä¾‹å¦‚: design1.jpg">
            </div>
            <div class="form-group">
                <label>æè¿°</label>
                <input type="text" id="newDesc" placeholder="2024 / Design">
            </div>
            <div class="modal-actions">
                <button class="admin-btn" style="background:#eee;" onclick="closeAddModal()">å–æ¶ˆ</button>
                <button class="admin-btn btn-add" onclick="confirmAdd()">ç¡®è®¤æ·»åŠ </button>
            </div>
        </div>
    </div>

    <script>
        // ================= æ•°æ®æº =================
        let homeModules = [
            { id: 'h1', title: "äº§å“é¡¹ç›®", cover: "https://images.unsplash.com/photo-1611186871348-b1ce696e52c9?w=600&q=80", targetCategory: "product" },
            { id: 'h2', title: "çº¿ä¸‹é¡¹ç›®", cover: "https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=600&q=80", targetCategory: "offline" },
            { id: 'h3', title: "ç”µå•†å±•ç¤º", cover: "https://images.unsplash.com/photo-1472851294608-4155f2118c03?w=600&q=80", targetCategory: "ecommerce" },
            { id: 'h4', title: "å“ç‰Œå†…å®¹", cover: "https://images.unsplash.com/photo-1600607686527-6fb886090705?w=600&q=80", targetCategory: "brand" }
        ];

        let allProjects = [
            { title: "æ™ºèƒ½éŸ³ç®±è¯¦æƒ…", category: "product", img: "https://images.unsplash.com/photo-1589492477829-5e65395b66cc?w=800&q=80", desc: "2024 / Product Design" },
            { title: "ä¸Šæµ·å±•ä¼šæ˜“æ‹‰å®", category: "offline", img: "https://images.unsplash.com/photo-1563986768609-322da13575f3?w=800&q=80", desc: "2024 / Exhibition" },
            { title: "åŒ11å¤§ä¿ƒä¸»å›¾", category: "ecommerce", img: "https://images.unsplash.com/photo-1556742049-0cfed4f7a07d?w=800&q=80", desc: "Campaign Design" },
            { title: "å“ç‰ŒVIæ‰‹å†Œ", category: "brand", img: "https://images.unsplash.com/photo-1634942537034-2531766767d1?w=800&q=80", desc: "Identity System" }
        ];

        const categoryNames = { "product": "äº§å“é¡¹ç›®", "offline": "çº¿ä¸‹é¡¹ç›®", "ecommerce": "ç”µå•†å±•ç¤º", "brand": "å“ç‰Œå†…å®¹" };

        // ================= æ ¸å¿ƒé€»è¾‘ =================
        let isAdmin = false;
        let currentCategory = null;

        const gridContainer = document.getElementById('gridContainer');
        const breadcrumb = document.getElementById('breadcrumb');
        const pageHeader = document.getElementById('pageHeader');
        const adminBtn = document.getElementById('adminBtn');
        const adminPanel = document.getElementById('adminPanel');

        // 1. æ¸²æŸ“é¦–é¡µ
        function renderHome() {
            currentCategory = null;
            gridContainer.innerHTML = '';
            breadcrumb.classList.remove('active');
            pageHeader.style.display = 'none';
            document.getElementById('homePoster').style.display = 'flex';
            window.scrollTo(0, 0);
            updateAdminUI();

            homeModules.forEach((mod, index) => {
                const card = document.createElement('div');
                card.className = 'card fade-in';
                card.style.animationDelay = `${index * 0.05}s`;
                card.onclick = () => renderCategory(mod.targetCategory);
                card.innerHTML = `
                    <img src="${mod.cover}" alt="${mod.title}">
                    <div class="card-overlay">
                        <div class="card-title">${mod.title}</div>
                        <div class="card-subtitle">Explore Collection â†’</div>
                    </div>
                `;
                gridContainer.appendChild(card);
            });
        }

        // 2. æ¸²æŸ“åˆ†ç±»é¡µ
        function renderCategory(categoryKey) {
            currentCategory = categoryKey;
            gridContainer.innerHTML = '';
            breadcrumb.classList.add('active');
            pageHeader.style.display = 'block';
            document.getElementById('homePoster').style.display = 'none';
            window.scrollTo(0, 0);
            updateAdminUI();

            document.getElementById('displayTitle').innerText = categoryNames[categoryKey];
            document.getElementById('pageName').innerText = categoryNames[categoryKey];

            const items = allProjects.filter(p => p.category === categoryKey);

            if (items.length === 0) {
                gridContainer.innerHTML = '<div style="color:#999; padding:20px;">æš‚æ— å†…å®¹ï¼Œè¯·ç‚¹å‡»ç®¡ç†å‘˜é¢æ¿æ·»åŠ ã€‚</div>';
            }

            items.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'card fade-in';
                card.style.animationDelay = `${index * 0.05}s`;
                
                // åˆ é™¤æŒ‰é’® (ä»…ç®¡ç†å‘˜å¯è§)
                if (isAdmin) {
                    const delBtn = document.createElement('div');
                    delBtn.className = 'delete-badge';
                    delBtn.innerHTML = 'Ã—';
                    delBtn.onclick = (e) => { e.stopPropagation(); deleteProject(item); };
                    card.appendChild(delBtn);
                }

                card.onclick = () => openLightbox(item);
                card.innerHTML += `
                    <img src="${item.img}" alt="${item.title}">
                    <div class="card-overlay" style="background: linear-gradient(to top, rgba(0,0,0,0.5), transparent);">
                        <div class="card-title" style="font-size:1rem;">${item.title}</div>
                    </div>
                `;
                gridContainer.appendChild(card);
            });
        }

        // ================= ç®¡ç†å‘˜åŠŸèƒ½ =================
        function handleAdminLogin() {
            if (isAdmin) {
                isAdmin = false;
                alert("å·²é€€å‡ºç®¡ç†å‘˜æ¨¡å¼");
            } else {
                const pwd = prompt("è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç :");
                if (pwd === '0911') {
                    isAdmin = true;
                    alert("ç™»å½•æˆåŠŸï¼\nè¯·æ³¨æ„ï¼šæµè§ˆå™¨æ— æ³•ç›´æ¥å†™å…¥GitHubã€‚\nä¿®æ”¹å®Œæˆåï¼Œè¯·ç‚¹å‡»ã€ä¿å­˜æ›´æ”¹ã€‘ç”Ÿæˆä»£ç ï¼Œå¹¶æ‰‹åŠ¨æ›´æ–°index.htmlã€‚");
                } else if (pwd !== null) {
                    alert("å¯†ç é”™è¯¯");
                }
            }
            updateAdminUI();
            if(currentCategory) renderCategory(currentCategory); // åˆ·æ–°æ˜¾ç¤ºåˆ é™¤æŒ‰é’®
        }

        function updateAdminUI() {
            if (isAdmin) {
                adminBtn.classList.add('active');
                adminBtn.innerText = "é€€å‡ºç®¡ç†";
                adminPanel.classList.add('show');
                document.getElementById('currentStatus').innerText = currentCategory ? `æ­£åœ¨ç®¡ç†: ${categoryNames[currentCategory]}` : "è¯·è¿›å…¥åˆ†ç±»é¡µé¢è¿›è¡Œæ“ä½œ";
                document.querySelector('.btn-add').disabled = !currentCategory;
                document.querySelector('.btn-add').style.opacity = currentCategory ? 1 : 0.5;
            } else {
                adminBtn.classList.remove('active');
                adminBtn.innerText = "ç®¡ç†å‘˜ç™»å½•";
                adminPanel.classList.remove('show');
            }
        }

        // åˆ é™¤é€»è¾‘
        function deleteProject(itemToDelete) {
            if(!confirm(`ç¡®å®šåˆ é™¤ "${itemToDelete.title}" å—?`)) return;
            // æ‰¾åˆ°åŸæ•°ç»„ä¸­çš„ç´¢å¼•å¹¶åˆ é™¤
            const index = allProjects.findIndex(p => p === itemToDelete);
            if (index > -1) {
                allProjects.splice(index, 1);
                renderCategory(currentCategory); // é‡æ–°æ¸²æŸ“
            }
        }

        // æ–°å¢é€»è¾‘
        function openAddModal() {
            document.getElementById('addModal').classList.add('show');
        }
        function closeAddModal() {
            document.getElementById('addModal').classList.remove('show');
        }
        function confirmAdd() {
            const title = document.getElementById('newTitle').value;
            const imgName = document.getElementById('newImgName').value;
            const desc = document.getElementById('newDesc').value;

            if(!title || !imgName) return alert("æ ‡é¢˜å’Œå›¾ç‰‡åä¸èƒ½ä¸ºç©º");

            // æ·»åŠ æ–°æ•°æ®
            const newItem = {
                title: title,
                category: currentCategory,
                img: `images/${imgName}`, // è‡ªåŠ¨åŠ ä¸Šè·¯å¾„å‰ç¼€
                desc: desc
            };
            
            // æ”¾åˆ°æ•°ç»„æœ€å‰é¢
            allProjects.unshift(newItem);
            
            closeAddModal();
            renderCategory(currentCategory);
            
            // æ¸…ç©ºè¡¨å•
            document.getElementById('newTitle').value = '';
            document.getElementById('newImgName').value = '';
        }

        // ================= æ ¸å¿ƒï¼šä¿å­˜/å¯¼å‡ºä»£ç  =================
        function exportData() {
            const dataStr = JSON.stringify(allProjects, null, 4);
            const homeStr = JSON.stringify(homeModules, null, 4);
            
            // ç”Ÿæˆä¸€æ®µå¯ä»¥ç›´æ¥å¤åˆ¶çš„ JS ä»£ç 
            const exportContent = `
// ===================================================
// è¯·å¤åˆ¶ä»¥ä¸‹ä¸¤æ®µä»£ç ï¼Œæ›¿æ¢ index.html ä¸­å¯¹åº”çš„æ•°ç»„éƒ¨åˆ†
// ===================================================

let homeModules = ${homeStr};

let allProjects = ${dataStr};
            `;
            
            // åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡æœ¬æ–‡ä»¶ä¸‹è½½ï¼Œæ–¹ä¾¿ç”¨æˆ·å¤åˆ¶
            const blob = new Blob([exportContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'updated_data_code.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            alert("å·²ç”Ÿæˆæ•°æ®æ–‡ä»¶ï¼\n1. è¯·æŸ¥çœ‹ä¸‹è½½çš„ 'updated_data_code.txt'\n2. å°†é‡Œé¢çš„ä»£ç å¤åˆ¶ã€‚\n3. åœ¨ GitHub ç¼–è¾‘ index.htmlï¼Œæ›¿æ¢åŸæœ‰çš„æ•°æ®éƒ¨åˆ†ã€‚");
        }

        // ================= è¾…åŠ©åŠŸèƒ½ =================
        function openLightbox(item) {
            const lb = document.getElementById('lightbox');
            document.getElementById('lbImg').src = item.img;
            document.getElementById('lbTitle').innerText = item.title;
            document.getElementById('lbDesc').innerText = item.desc || '';
            lb.classList.add('active');
        }
        function closeLightbox() { document.getElementById('lightbox').classList.remove('active'); }

        window.onload = renderHome;
    </script>
</body>
</html>
